日時： 2007/07/27 13:40
名前： サブ
管理人様。 ご無沙汰しております。 またまたＤＮＳ構築についてご教授願いたくスレッドを立てさせていただきました。 現在、CentOS5で固定IP１つで管理人様のご指導により、 外部向けＤＮＳサーバーを「domain.com(仮称)」を固定IP“aaa.bbb.ccc.ddd(仮称)”で BALUEDOMAINにて登録を行ない構築を行っております。 他に２つドメイン「domain.net(仮称)」と「domain.jp(仮称)」を登録しておりますが、 バーチャルドメインとして外部からアクセスできるようにするためにはVALUEDOMAINにて どのように登録すれば良いのでしょうか？ １：外部公開できるように２つのドメインを固定IP“aaa.bbb.ccc.ddd”として登録し、 　　ダイナミックＤＮＳ等にも登録して各ドメインの外部向けゾーンファイルを作成する。 ２：各ドメインをVALUEDOMAINのＤＮＳに登録して自サーバーのＤＮＳ構築には設定をしない。 ３：外部公開している自サーバーのＤＮＳに合わせる。 どのタイプを行うのでしょうか？または他の方法があるのでしょうか？ 上手く質問できていないかも知れませんがご教授の程、宜しくお願い致します。 
日時： 2007/07/27 14:03
名前： 管理者
> １：外部公開できるように２つのドメインを固定IP“aaa.bbb.ccc.ddd”として登録し、 > 　　ダイナミックＤＮＳ等にも登録して各ドメインの外部向けゾーンファイルを作成する。 > > ２：各ドメインをVALUEDOMAINのＤＮＳに登録して自サーバーのＤＮＳ構築には設定をしない。 > > ３：外部公開している自サーバーのＤＮＳに合わせる。 「１」は管理が煩雑になりそうなので私だったらNGですね。 「２」と「３」ですが、よほど自サーバをDNSサーバとして公開させたい事を除けば、確実に「２」を選びます。 ここからのレスは私個人的な意見ですが、外部で利用できるサービスは極力利用する。 自サーバが狙われる可能性があるリスクを持ってまで、外部にサーバを公開させない。 と、この様な感じです。 考え方は人によって多々あると思いますので「これです」と言うご回答はできません。 私だったら、先述させて頂いたように「２」の方が良いと思います。
日時： 2007/07/27 14:31
名前： サブ
お忙しい中、 早速のご返信有難うございます。 管理人さまが「１」の方法が煩雑と考えるなら今の私の力量では 到底困難であると思われるので×ですね。 すると「２」か「３」ということになりますね。 そこで、１つ教えていただきたいことがございます。 少し横道にそれてしまいますが、現在、当方ではＤＮＳを外部公開しています。 (単に理解を深めたい気持ちと挑戦してみたいという気持ちが強かっただけなのですが(^^;;) 外部公開にたどり着くまでに管理人様に数多くのご教授いただきながら、 併せてＤＮＳ外部公開するデメリットもわかりました。 しかし、そのデメリットをわかった上でＤＮＳの外部公開を望む方々を この掲示板でもよく目にします。 ＤＮＳ外部公開をする方々の目的やメリットにはどんなことが考えられるのでしょうか？ 今後の自サバ運営のためにもわかる範囲で構わないので教えて頂きたいと思います。 宜しくお願いいたします。
日時： 2007/07/27 15:21
名前： 管理者
> 少し横道にそれてしまいますが、現在、当方ではＤＮＳを外部公開しています。 > (単に理解を深めたい気持ちと挑戦してみたいという気持ちが強かっただけなのですが(^^;;) この考え方は、とても大切ですね。 > 外部公開にたどり着くまでに管理人様に数多くのご教授いただきながら、 > 併せてＤＮＳ外部公開するデメリットもわかりました。 > > しかし、そのデメリットをわかった上でＤＮＳの外部公開を望む方々を > この掲示板でもよく目にします。 失念しておりました。肝心な回答部分が抜けておりましたね。失礼しました。 まず、ドメインと言う概念から簡単に説明します。 ドメインには「jp」や「com」などがありますよね？。これが一番大きい組織になります。 続いて「sample.jp」や「sample.com」・・・となります。 以下「jp」に特化して説明します。 「jp」と言う組織には「sample.jp」や「hogehoge.jp」の様に「jp」に属しているサブ組織があります。 さらに「aaa.sample.jp」や「bbb.sample.jp」と枝分かれしていきます。この概念がサブドメインと言うものになります。 簡単な図を書くと以下の様になります 　　　　　　　　　　　　　　　　　┌───┐ 　　　　　　　　　　　　　　　　　│　JP　│ 　　　　　　　　　　　　　　　　　└─┬─┘ 　　　　　　　　　┌─────────┴──────────┐ 　　　　　┌───┴───┐　　　　　　　　　　　　┌───┴───┐ 　　　　　│　sample.jp　 │　　　　　　　　　　　　│ hogehoge.jp　│ 　　　　　└───┬───┘　　　　　　　　　　　　└───┬───┘ 　　　　┌────┴────┐　　　　　　　　　┌─────┴────┐ ┌───┴───┐　┌───┴───┐　┌───┴────┐　┌───┴────┐ │aaa.sample.jp │　│bbb.sample.jp │　│aaa.hogehoge.jp │　│bbb.hogehoge.jp │ └───────┘　└───────┘　└────────┘　└────────┘ 　　　　：　　　　　　　　　：　　　　　　　　　：　　　　　　　　　　： 　　　　：　　　　　　　　　：　　　　　　　　　：　　　　　　　　　　： よって今回の例(「domain.net(仮称)」と「domain.jp(仮称)」)で言うと「組織」が異なっているので厳密に言えば、 「１」の「各ドメインの外部向けゾーンファイルを作成する」に当てはまります。 しかし、「バーチャルドメインとして・・・」となっているので、リアルドメインでのDNSサーバに各バーチャルサーバのドメインを登録するのが良いと思います。 (リアルドメイン「domain.com(仮称)」がバーチャルサーバのドメイン「domain.net(仮称)」と「domain.jp(仮称)」を一元管理していると言う考え方です。) > ＤＮＳ外部公開をする方々の目的やメリットにはどんなことが考えられるのでしょうか？ 現在のレジストラでのDNS登録は一昔前と違って複数レコードを登録できる様になっています。(現行のレジストラにもよりますが・・・) 以前は、「1IP = 1ドメイン」しか登録できず、自分が取得したドメインに対してサブドメインの外部からのアクセスができない事があったようです。 (ガセかも知れません・・・。当時どの様にDNSサーバとして登録する手段があったのか不明なので・・・・) この場合の対処法として自サーバを外部公開向けにして、自分が取得したドメインの組織にサブドメインを返却するようにして対応していたと言う記事を見かけた事があります。 この事が現在に至っているのではないでしょうか？ 今現在では外部DNSサーバにサブドメイン(ホスト名)を登録できるので、自サーバを外部公開することによるメリットは思いつかないのが現状です。